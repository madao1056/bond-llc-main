---
import Button from '~/components/ui/Button.astro';
import { Icon } from 'astro-icon/components';

interface Props {
  title?: string;
  subtitle?: string;
  tagline?: string;
  description?: string;
  actions?: Array<{
    text: string;
    href: string;
    variant?: 'primary' | 'secondary' | 'accent' | 'ghost' | 'outline';
    size?: 'sm' | 'lg' | 'xl';
    icon?: string;
    target?: string;
  }>;
  backgroundImage?: string;
  backgroundColor?: string;
  gradientOverlay?: boolean;
  textAlign?: 'left' | 'center' | 'right';
  minHeight?: string;
  id?: string;
  class?: string;
}

const {
  title,
  subtitle,
  tagline,
  description,
  actions = [],
  backgroundImage,
  backgroundColor = 'bg-gradient-to-br from-bond-navy via-bond-navy/95 to-bond-navy/90',
  gradientOverlay = true,
  textAlign = 'center',
  minHeight = 'min-h-[60vh]',
  id,
  class: className = '',
} = Astro.props;

const alignmentClasses = {
  left: 'text-left items-start',
  center: 'text-center items-center',
  right: 'text-right items-end',
};
---

<section 
  class={`relative w-full ${backgroundColor} ${minHeight} flex items-center justify-center overflow-hidden ${className}`}
  {...id ? { id } : {}}
>
  <!-- 背景画像 -->
  {backgroundImage && (
    <div 
      class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-60 mix-blend-overlay"
      style={`background-image: url(${backgroundImage});`}
    />
  )}
  
  <!-- グラデーションオーバーレイ -->
  {gradientOverlay && (
    <div class="absolute inset-0 bg-gradient-to-r from-black/40 via-black/20 to-black/40"></div>
  )}
  
  <!-- パターンオーバーレイ -->
  <div class="absolute inset-0 opacity-5">
    <svg width="100%" height="100%" viewBox="0 0 100 100">
      <defs>
        <pattern id="hero-pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
          <circle cx="10" cy="10" r="1" fill="currentColor"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#hero-pattern)" class="text-white"/>
    </svg>
  </div>
  
  <!-- アニメーション要素 -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- フローティング要素 -->
    <div class="absolute top-20 left-10 w-2 h-2 bg-bond-yellow-main/20 rounded-full animate-pulse"></div>
    <div class="absolute top-40 right-20 w-3 h-3 bg-bond-yellow-main/30 rounded-full animate-pulse delay-1000"></div>
    <div class="absolute bottom-32 left-1/4 w-1.5 h-1.5 bg-bond-yellow-main/25 rounded-full animate-pulse delay-500"></div>
    <div class="absolute bottom-20 right-1/3 w-2.5 h-2.5 bg-bond-yellow-main/20 rounded-full animate-pulse delay-1500"></div>
  </div>
  
  <!-- コンテンツ -->
  <div class="relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 lg:py-28">
    <div class={`flex flex-col ${alignmentClasses[textAlign]} max-w-4xl ${textAlign === 'center' ? 'mx-auto' : ''}`}>
      
      <!-- タグライン -->
      {tagline && (
        <div class="mb-6 animate-fade-in-up animation-delay-200">
          <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-bond-yellow-main/10 text-bond-yellow-main border border-bond-yellow-main/20 backdrop-blur-sm">
            {tagline}
          </span>
        </div>
      )}
      
      <!-- タイトル -->
      {title && (
        <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-bold font-serif text-white mb-6 lg:mb-8 leading-[1.2] tracking-tight animate-fade-in-up animation-delay-300">
          <Fragment set:html={title} />
        </h1>
      )}
      
      <!-- サブタイトル -->
      {subtitle && (
        <p class="text-xl sm:text-2xl lg:text-3xl text-white/90 mb-6 lg:mb-8 leading-relaxed font-medium animate-fade-in-up animation-delay-400">
          <Fragment set:html={subtitle} />
        </p>
      )}
      
      <!-- 説明文 -->
      {description && (
        <p class="text-lg sm:text-xl text-white/80 mb-8 lg:mb-12 leading-relaxed max-w-3xl animate-fade-in-up animation-delay-500">
          <Fragment set:html={description} />
        </p>
      )}
      
      <!-- アクションボタン -->
      {actions.length > 0 && (
        <div class={`flex flex-col sm:flex-row gap-4 sm:gap-6 ${textAlign === 'center' ? 'justify-center' : textAlign === 'right' ? 'justify-end' : 'justify-start'} animate-fade-in-up animation-delay-600`}>
          {actions.map((action, index) => (
            <Button
              variant={action.variant || (index === 0 ? 'accent' : 'secondary')}
              size={action.size || 'lg'}
              href={action.href}
              target={action.target}
              class={`transform hover:scale-105 transition-transform duration-300 ${action.variant === 'secondary' ? 'bg-white/10 border-white/20 text-white hover:bg-white hover:text-bond-navy backdrop-blur-sm' : ''}`}
            >
              {action.icon && (
                <Icon name={action.icon} class="w-5 h-5" />
              )}
              {action.text}
            </Button>
          ))}
        </div>
      )}
      
      <!-- ソーシャルプルーフや統計情報（オプション） -->
      <slot name="stats" />
    </div>
  </div>
  
  <!-- スクロールインジケーター -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
    <div class="flex flex-col items-center text-white/60 hover:text-white transition-colors duration-300">
      <span class="text-sm mb-2">スクロール</span>
      <Icon name="tabler:chevron-down" class="w-6 h-6" />
    </div>
  </div>
</section>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out forwards;
    opacity: 0;
  }
  
  .animation-delay-200 {
    animation-delay: 0.2s;
  }
  
  .animation-delay-300 {
    animation-delay: 0.3s;
  }
  
  .animation-delay-400 {
    animation-delay: 0.4s;
  }
  
  .animation-delay-500 {
    animation-delay: 0.5s;
  }
  
  .animation-delay-600 {
    animation-delay: 0.6s;
  }
</style>
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .bg-page {
    background-color: var(--aw-color-bg-page);
  }

  .bg-dark {
    background-color: var(--aw-color-bg-page-dark);
  }

  .bg-light {
    background-color: var(--aw-color-bg-page);
  }

  .text-page {
    color: var(--aw-color-text-page);
  }

  .text-muted {
    color: var(--aw-color-text-muted);
  }
}

@layer components {

  /* 基本ボタンスタイル - Sharp & Technical */
  .btn {
    @apply inline-flex items-center justify-center rounded-none font-bold text-center text-sm uppercase tracking-widest;
    @apply transition-all duration-200 ease-out cursor-pointer;
    @apply py-3 px-6 gap-2 min-h-[48px];
    @apply focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-bond-navy;
    @apply active:translate-y-0.5;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Primary button - Main Action (Navy) */
  .btn-primary {
    @apply btn bg-bond-navy text-white border border-bond-navy;
    @apply hover:bg-bond-yellow-main hover:text-bond-navy hover:border-bond-yellow-main;
    @apply dark:bg-bond-yellow-main dark:text-bond-navy;
    @apply dark:hover:bg-white dark:hover:text-bond-navy;
  }

  /* Secondary button - Sub (Outline) */
  .btn-secondary {
    @apply btn bg-transparent text-bond-navy border border-bond-navy;
    @apply hover:bg-bond-navy hover:text-white;
    @apply dark:text-white dark:border-white;
    @apply dark:hover:bg-white dark:hover:text-bond-navy;
    @apply backdrop-blur-sm;
  }

  /* Accent button - Attention (Yellow) */
  .btn-accent {
    @apply btn bg-bond-yellow-main text-bond-navy border border-bond-yellow-main;
    @apply hover:bg-white hover:text-bond-navy hover:border-bond-navy;
    @apply shadow-[4px_4px_0_0_#1f2e6c];
    @apply hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px];
  }

  /* Ghost button */
  .btn-ghost {
    @apply btn bg-transparent text-bond-navy border-0;
    @apply hover:bg-bond-navy/5 hover:text-bond-navy;
    @apply dark:text-white dark:hover:bg-white/10;
  }

  /* Outline button */
  .btn-outline {
    @apply btn bg-transparent text-bond-navy border border-bond-navy/30;
    @apply hover:border-bond-navy hover:bg-bond-navy/5;
  }

  /* Tertiary button - Link style with arrow usually */
  .btn-tertiary {
    @apply inline-flex items-center justify-center font-bold text-sm tracking-widest uppercase;
    @apply text-bond-navy border-b border-transparent hover:border-bond-navy;
    @apply transition-all duration-200 ease-out cursor-pointer py-1 gap-1;
    @apply dark:text-white dark:hover:border-white;
  }

  /* Sizes */
  .btn-sm {
    @apply py-2 px-4 text-xs min-h-[36px];
  }

  .btn-lg {
    @apply py-4 px-8 text-base min-h-[56px];
  }

  .btn-xl {
    @apply py-5 px-10 text-lg min-h-[64px];
  }

  /* Status Colors (kept technical) */
  .btn-success {
    @apply btn bg-green-700 text-white border border-green-700;
  }

  .btn-danger {
    @apply btn bg-red-700 text-white border border-red-700;
  }

  .btn-warning {
    @apply btn bg-orange-600 text-white border border-orange-600;
  }

  /* アイコン付きボタン */
  .btn-icon {
    @apply flex items-center gap-3;
  }

  .btn-icon-only {
    @apply p-4 min-h-[52px] w-[52px] gap-0;
  }

  /* 全幅ボタン */
  .btn-block {
    @apply w-full;
  }

  /* ローディング状態 */
  .btn-loading {
    @apply opacity-75 cursor-wait transform-none pointer-events-none;
  }

  /* グループボタン */
  .btn-group {
    @apply flex;
  }

  .btn-group .btn:not(:first-child) {
    @apply rounded-l-none border-l-0;
  }

  .btn-group .btn:not(:last-child) {
    @apply rounded-r-none;
  }
}

/* 高度なマイクロアニメーション */
@layer utilities {
  /* Constructivism / Architecture of Intelligence Utilities */

  /* Background Grid Pattern */
  .bg-blueprint-grid {
    background-size: 50px 50px;
    background-image:
      linear-gradient(to right, rgba(31, 46, 108, 0.05) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(31, 46, 108, 0.05) 1px, transparent 1px);
  }

  .dark .bg-blueprint-grid {
    background-image:
      linear-gradient(to right, rgba(255, 255, 255, 0.1) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
  }

  /* Thin Lines */
  .border-hairline {
    border-width: 0.5px;
  }

  /* Neon Effects */
  .neon-text {
    text-shadow: 0 0 10px rgba(250, 215, 7, 0.5);
  }

  .neon-border {
    border-color: var(--bond-yellow-main);
    box-shadow: 0 0 10px rgba(250, 215, 7, 0.3);
  }

  .neon-glow {
    box-shadow: 0 0 20px rgba(250, 215, 7, 0.4);
  }

  /* Cut-out / Collage Effects */
  .cut-out-image {
    clip-path: polygon(0% 10px, 10px 0%,
        100% 0%, 100% calc(100% - 10px),
        calc(100% - 10px) 100%, 0% 100%);
    filter: grayscale(100%) contrast(110%);
  }

  /* Technical Drawing Lines */
  .tech-line::before {
    content: '';
    position: absolute;
    top: 50%;
    right: 100%;
    width: 20px;
    height: 1px;
    background-color: var(--bond-navy);
  }

  .tech-line::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 100%;
    width: 20px;
    height: 1px;
    background-color: var(--bond-navy);
  }

  /* Number Typography */
  .font-mono-number {
    font-family: var(--aw-font-mono);
    letter-spacing: -0.05em;
  }

  /* Specific Card Hover (replacing old ones) */
  .card-hover-tech {
    @apply transition-all duration-300 ease-out border border-bond-navy/10;
  }

  .card-hover-tech:hover {
    @apply border-bond-yellow-main shadow-[4px_4px_0_0_rgba(250, 215, 7, 1)] -translate-y-1 -translate-x-1;
  }
}

/* カスタムアニメーション */
@keyframes float {

  0%,
  100% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }
}

@keyframes glow {

  0%,
  100% {
    box-shadow: 0 0 20px rgba(251, 191, 36, 0.2);
  }

  50% {
    box-shadow: 0 0 30px rgba(251, 191, 36, 0.4);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }

  100% {
    background-position: 200px 0;
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

.shimmer {
  background: linear-gradient(90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      transparent);
  background-size: 200px 100%;
  animation: shimmer 2s infinite;
}

#header.scroll>div:first-child {
  @apply bg-page md:bg-white/90 md:backdrop-blur-md;
  box-shadow: 0 0.375rem 1.5rem 0 rgb(140 152 164 / 13%);
}

.dark #header.scroll>div:first-child,
#header.scroll.dark>div:first-child {
  @apply bg-page md:bg-[#030621e6] border-b border-gray-500/20;
  box-shadow: none;
}

/* #header.scroll > div:last-child {
  @apply py-3;
} */

#header.expanded nav {
  position: fixed;
  top: 70px;
  left: 0;
  right: 0;
  bottom: 70px !important;
  padding: 0 5px;
}

.dropdown:focus .dropdown-menu,
.dropdown:focus-within .dropdown-menu,
.dropdown:hover .dropdown-menu {
  display: block;
}

[astro-icon].icon-light>* {
  stroke-width: 1.2;
}

[astro-icon].icon-bold>* {
  stroke-width: 2.4;
}

[data-aw-toggle-menu] path {
  @apply transition;
}

[data-aw-toggle-menu].expanded g>path:first-child {
  @apply -rotate-45 translate-y-[15px] translate-x-[-3px];
}

[data-aw-toggle-menu].expanded g>path:last-child {
  @apply rotate-45 translate-y-[-8px] translate-x-[14px];
}

/* To deprecated */

.dd *:first-child {
  margin-top: 0;
}